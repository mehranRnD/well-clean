<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Building Apartments — Visual Map</title>
  <style>
    :root{
      --bg: linear-gradient(180deg,#e9f0ff 0%, #f6fbff 100%);
      --card: #ffffff;
      --muted: #6b7280;
      --accent: #1e3a8a;
      --gap: 12px;
      --apt-size: 86px;
      --transition: 300ms cubic-bezier(.2,.9,.3,1);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background:var(--bg); color:#0f172a; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      display:flex; align-items:flex-start; justify-content:center; min-height:100vh; padding:40px;
    }

    .wrap{
      width:1100px; max-width:calc(100% - 48px);
      display:grid; grid-template-columns: 1fr 320px; gap:28px;
      align-items:start;
    }

    .panel{
      background:linear-gradient(180deg,rgba(255,255,255,0.9), rgba(255,255,255,0.85));
      border-radius:18px; padding:20px; box-shadow: 0 6px 30px rgba(13, 42, 99, 0.12);
    }

    header h1{margin:0 0 6px 0;font-size:20px}
    header p{margin:0;color:var(--muted);font-size:13px}

    /* Building area */
    .building{
      padding:22px; background:linear-gradient(180deg,#f9fbff, #ffffff); border-radius:14px; border:1px solid rgba(14,41,93,0.04);
      display:flex; gap:20px; align-items:flex-end; justify-content:center; height:680px; position:relative; overflow:hidden;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }

    /* facade styling */
    .facade{
      width:700px; height:620px; background:linear-gradient(180deg,#edf4ff 0%, #ffffff 70%); border-radius:12px; padding:24px; box-shadow:0 14px 40px rgba(11,35,77,0.08);
      display:flex; flex-direction:column; gap:18px; justify-content:flex-start; align-items:center; position:relative;
      border:1px solid rgba(11,35,77,0.03);
    }

    /* Floors container */
    .floors{ display:flex; flex-direction:column-reverse; gap:14px; width:100%; align-items:center; }
    .floor{ width:100%; display:flex; gap:12px; justify-content:center; align-items:center; }

    /* Grid for apartments inside a floor */
    .apartment{
      width:var(--apt-size); height:var(--apt-size); border-radius:10px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px;
      box-shadow: 0 6px 18px rgba(12,35,80,0.06); border:1px solid rgba(11,35,77,0.06);
      transition: transform var(--transition), box-shadow var(--transition), background-color var(--transition);
      cursor:pointer; position:relative; overflow:visible; user-select:none;
    }

    .apartment:hover{ transform: translateY(-8px) scale(1.02); box-shadow: 0 18px 36px rgba(12,35,80,0.12); }

    .apt-code{ font-size:12px; font-weight:600; color:#031124; letter-spacing:0.6px; }
    .apt-status{ font-size:11px; color:var(--muted); }

    /* status colors */
    .vacant{ background: linear-gradient(180deg,#ecffef, #d9fbd9); border:1px solid rgba(25,120,75,0.12); }
    .vacant::after{ content:""; position:absolute; inset:auto 8px 8px auto; width:10px; height:10px; border-radius:50%; background:rgba(34,197,94,0.98); box-shadow:0 0 8px rgba(34,197,94,0.18); }

    .occupied{ background: linear-gradient(180deg,#fff2f2, #ffecec); border:1px solid rgba(200,30,45,0.08); }
    .occupied::after{ content:""; position:absolute; inset:auto 8px 8px auto; width:10px; height:10px; border-radius:50%; background:rgba(220,38,38,0.98); box-shadow:0 0 8px rgba(220,38,38,0.15); }

    .blocked{ background: linear-gradient(180deg,#ffffff,#f6f7fb); border:1px dashed rgba(120,130,150,0.12); }
    .blocked::after{ content:""; position:absolute; inset:auto 8px 8px auto; width:10px; height:10px; border-radius:50%; background:rgba(120,130,150,0.9); }

    /* small window details */
    .apartment .window{
      width:44px; height:22px; border-radius:6px; background:rgba(255,255,255,0.55); display:flex; align-items:center; justify-content:center; font-size:10px; color:#112;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.04);
    }

    /* Glow animation for vacant spots */
    @keyframes pulseGreen { 0%{ box-shadow: 0 6px 18px rgba(34,197,94,0.06);} 50%{ box-shadow: 0 18px 36px rgba(34,197,94,0.09);} 100%{ box-shadow: 0 6px 18px rgba(34,197,94,0.06);} }
    .vacant{ animation: pulseGreen 4.5s ease-in-out infinite; }

    /* right panel */
    .sidebar{ display:flex; flex-direction:column; gap:12px }
    .legend{ display:flex; flex-direction:column; gap:8px; }
    .legend-item{ display:flex; gap:10px; align-items:center; padding:8px; border-radius:8px; background:linear-gradient(180deg,#fff,#fbfdff); border:1px solid rgba(11,35,77,0.03); }
    .dot{ width:18px; height:18px; border-radius:6px; box-shadow: 0 4px 10px rgba(12,35,80,0.06) }
    .dot.v{ background: linear-gradient(180deg,#22c55e,#16a34a); }
    .dot.o{ background: linear-gradient(180deg,#ef4444,#dc2626); }
    .dot.b{ background: linear-gradient(180deg,#f8fafc,#e6e9ef); border:1px solid rgba(11,35,77,0.04); }

    .controls{ display:flex; flex-direction:column; gap:8px; }
    .controls button{ padding:8px 12px; border-radius:10px; border:0; background:var(--accent); color:#fff; font-weight:600; cursor:pointer; box-shadow:0 8px 22px rgba(14,44,120,0.12) }

    .floor-label{ font-weight:700; font-size:13px; color:var(--muted); }

    footer.info{ margin-top:12px; font-size:12px; color:var(--muted); }

    /* responsive */
    @media (max-width:1100px){ .wrap{ grid-template-columns: 1fr; } .building{ height:auto } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <header>
        <h1>Building Visual — 43 Apartments</h1>
        <p>Click an apartment to toggle its status. Edit initial statuses in the JavaScript section.</p>
      </header>

      <div class="building">
        <div class="facade" id="facade">
          <div style="display:flex; width:100%; justify-content:space-between; align-items:center;">
            <div style="display:flex; gap:8px; align-items:center;"><svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="3" fill="#e6f0ff"/><path d="M7 20V10h10v10" stroke="#1e3a8a" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg><div style="font-weight:700">Map View</div></div>
            <div style="font-size:12px;color:var(--muted)">Total: <strong id="totalCount">0</strong></div>
          </div>

          <div class="floors" id="floors">
            <!-- floors get injected here -->
          </div>

        </div>
      </div>

      <footer class="info">Tip: Use the right panel to change view, or click an apartment to cycle status (Vacant → Occupied → Blocked).</footer>
    </div>

    <aside class="panel sidebar">
      <div>
        <h3 style="margin:0 0 6px 0">Legend</h3>
        <div class="legend">
          <div class="legend-item"><div class="dot v"></div><div><strong>Vacant</strong><div style="font-size:12px;color:var(--muted)">Green — available</div></div></div>
          <div class="legend-item"><div class="dot o"></div><div><strong>Occupied</strong><div style="font-size:12px;color:var(--muted)">Red — occupied</div></div></div>
          <div class="legend-item"><div class="dot b"></div><div><strong>Blocked</strong><div style="font-size:12px;color:var(--muted)">White — not usable</div></div></div>
        </div>
      </div>

      <div class="controls">
        <h4 style="margin:0">Quick actions</h4>
        <button id="randomize">Randomize statuses</button>
        <button id="setAllVacant">Set All Vacant</button>
        <button id="setAllOccupied">Set All Occupied</button>
      </div>

      <div style="margin-top:6px">
        <h4 style="margin:0">Info</h4>
        <p style="margin:6px 0 0 0; color:var(--muted); font-size:13px">Edit <code>initialStatuses</code> in the script to predefine statuses. You can also use <code>setStatus(code, status)</code> from the dev console.</p>
      </div>
    </aside>
  </div>

  <script>
    /* -----------------------------------------------
       CONFIG & USAGE
       - The building has 43 apartments total.
       - Naming pattern used by generator:
         GF-00..GF-09 (10 units ground floor),
         1F-10..1F-19 (10 units 1st floor),
         2F-20..2F-29 (10 units 2nd floor),
         3F-30..3F-39 (10 units 3rd floor),
         4F-40..4F-42 (3 units 4th floor)

       To preset statuses, modify the object below `initialStatuses`.
       Valid statuses: 'vacant', 'occupied', 'blocked'
       Example: initialStatuses['GF-01'] = 'occupied'
       You may call setStatus('1F-12','vacant') from the console.
    -------------------------------------------------*/

    // Example presets — edit these to change initial view
    const initialStatuses = {
      'GF-00':'vacant', 'GF-01':'occupied','GF-02':'vacant','GF-03':'blocked','GF-04':'occupied','GF-05':'vacant','GF-06':'occupied','GF-07':'vacant','GF-08':'vacant','GF-09':'occupied',
      '1F-10':'occupied','1F-11':'vacant','1F-12':'vacant','1F-13':'occupied','1F-14':'vacant','1F-15':'blocked','1F-16':'occupied','1F-17':'vacant','1F-18':'vacant','1F-19':'occupied',
      '2F-20':'vacant','2F-21':'vacant','2F-22':'occupied','2F-23':'occupied','2F-24':'vacant','2F-25':'blocked','2F-26':'vacant','2F-27':'vacant','2F-28':'occupied','2F-29':'occupied',
      '3F-30':'vacant','3F-31':'occupied','3F-32':'vacant','3F-33':'vacant','3F-34':'occupied','3F-35':'vacant','3F-36':'blocked','3F-37':'occupied','3F-38':'vacant','3F-39':'vacant',
      '4F-40':'occupied','4F-41':'vacant','4F-42':'blocked'
    };

    // Utility: generate the apartment codes in correct order
    function generateCodes(){
      const codes = [];
      // Ground floor 0-9
      for(let i=0;i<10;i++) codes.push(`GF-${String(i).padStart(2,'0')}`);
      // Floors 1-3, 10-39 (10 each)
      for(let floor=1; floor<=3; floor++){
        for(let i=0;i<10;i++){
          const num = floor*10 + i;
          codes.push(`${floor}F-${num}`);
        }
      }
      // Top partial floor 4F-40..42 (3 units) -> adjust to reach 43 total
      for(let n=40; n<=42; n++) codes.push(`4F-${n}`);
      return codes;
    }

    const allCodes = generateCodes(); // 43 codes

    // Main state map
    const state = {};

    // initialize state from initialStatuses or default to 'vacant'
    allCodes.forEach(code => { state[code] = initialStatuses[code] || 'vacant'; });

    // DOM refs
    const floorsEl = document.getElementById('floors');
    const totalCountEl = document.getElementById('totalCount');

    function buildFloors(){
      floorsEl.innerHTML = '';
      // We'll render floors as groups: GF, 1F, 2F, 3F, 4F
      const groupings = [ {label:'4F', codes: allCodes.filter(c=>c.startsWith('4F-'))},
                          {label:'3F', codes: allCodes.filter(c=>c.startsWith('3F-'))},
                          {label:'2F', codes: allCodes.filter(c=>c.startsWith('2F-'))},
                          {label:'1F', codes: allCodes.filter(c=>c.startsWith('1F-'))},
                          {label:'GF', codes: allCodes.filter(c=>c.startsWith('GF-'))} ];

      groupings.forEach(group=>{
        const floorEl = document.createElement('div');
        floorEl.className = 'floor';

        // label
        const label = document.createElement('div');
        label.className = 'floor-label';
        label.style.width = '70px';
        label.style.textAlign = 'left';
        label.textContent = group.label;
        floorEl.appendChild(label);

        // add apartments container for this floor
        const container = document.createElement('div');
        container.style.display='flex'; container.style.gap='12px'; container.style.flexWrap = 'nowrap';

        group.codes.forEach(code=>{
          const apt = document.createElement('div');
          apt.className = 'apartment ' + state[code];
          apt.dataset.code = code;
          apt.innerHTML = `<div class="window">${code}</div><div class="apt-status">${state[code].toUpperCase()}</div>`;

          apt.addEventListener('click', ()=>{ cycleStatus(code); });
          apt.addEventListener('mouseenter', ()=>{ apt.style.transform='translateY(-6px) scale(1.02)'; });
          apt.addEventListener('mouseleave', ()=>{ apt.style.transform=''; });

          container.appendChild(apt);
        });

        floorEl.appendChild(container);
        floorsEl.appendChild(floorEl);
      });

      updateCounts();
    }

    function updateCounts(){
      const totals = {vacant:0, occupied:0, blocked:0};
      Object.values(state).forEach(s=>{ totals[s] = (totals[s]||0)+1; });
      totalCountEl.textContent = `${allCodes.length} (V:${totals.vacant} O:${totals.occupied} B:${totals.blocked})`;
    }

    function setStatus(code, status){
      if(!state.hasOwnProperty(code)) return console.warn('No such apartment code:',code);
      if(!['vacant','occupied','blocked'].includes(status)) return console.warn('Invalid status:',status);
      state[code]=status;
      // update DOM element
      const el = document.querySelector(`.apartment[data-code='${code}']`);
      if(el){ el.className = 'apartment ' + status; el.querySelector('.apt-status').textContent = status.toUpperCase(); }
      updateCounts();
    }

    function cycleStatus(code){
      const current = state[code];
      const order = ['vacant','occupied','blocked'];
      const next = order[(order.indexOf(current)+1) % order.length];
      // smooth transition: fade + change
      const el = document.querySelector(`.apartment[data-code='${code}']`);
      if(el){ el.style.opacity = '0.4'; setTimeout(()=>{ setStatus(code,next); el.style.opacity='1'; }, 220); }
      else setStatus(code,next);
    }

    // quick actions
    document.getElementById('randomize').addEventListener('click', ()=>{
      const options = ['vacant','occupied','blocked'];
      allCodes.forEach(c=> state[c]= options[Math.floor(Math.random()*options.length)] );
      buildFloors();
    });
    document.getElementById('setAllVacant').addEventListener('click', ()=>{ allCodes.forEach(c=> state[c]='vacant'); buildFloors(); });
    document.getElementById('setAllOccupied').addEventListener('click', ()=>{ allCodes.forEach(c=> state[c]='occupied'); buildFloors(); });

    // expose helper to global for console usage
    window.setStatus = setStatus;
    window.state = state;

    // initial render
    buildFloors();
  </script>
</body>
</html>